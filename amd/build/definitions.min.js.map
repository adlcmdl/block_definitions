{"version":3,"file":"definitions.min.js","sources":["../src/definitions.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n\n/**\n * Client-side script to look up words and present them in a dialog.\n *\n * @package   block_definitions\n * @author    Tim Martinez <tim.martinez@adlc.ca>\n * @copyright 2021 Pembina Hills School Division. All rights reserved.\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/ajax', 'core/notification', 'core/templates',\n    'core/modal_factory'], function($, Ajax, Notification, Templates, ModalFactory) {\n\n    /**\n     * Take the response from the server and display it.\n     * @param object response The response from the Ajax request to the server.\n     * @returns void\n     */\n    function _displayDefinition(response) {\n        var template = 'block_definitions/' + response.template;\n        Templates.render(template, response).then(function(html, javascript) {\n            ModalFactory.create({\n                title: 'Definition',\n                body: html,\n                footer: '<button id=\"closeDialog\" type=\"button\" class=\"btn btn-primary\" data-action=\"hide\">Close</button>'\n            }).done(function(modal) {\n                modal.show();\n                Templates.runTemplateJS(javascript);\n                $('a[data-define]').on('click', function() {\n                    modal.hide();\n                    modal.destroy();\n                    $('#definitions_search').val($(this).attr('data-define'));\n                    searchDefinition($(this).attr('data-define'), $('input[name=\"selectdictionary\"]:checked').val());\n                });\n            });\n        }).fail(Notification.exception);\n    }\n\n    /**\n     * Given a word and dictionary, search for the word using AJAX.\n     *\n     * @param string def The word to search for.\n     * @param string dic The dictionary to use.\n     * @returns void\n     */\n    function searchDefinition(def, dic) {\n        var data;\n        Ajax.call([{\n                methodname: 'block_definitions_get_definition',\n                args: {word: def, dictionary: dic},\n                done: function(data) {\n                    _displayDefinition(data);\n                }.bind(data),\n\n                fail: Notification.exception\n            }]);\n    }\n\n    return {\n        init: function() {\n            $(document).on('click', '#block_definition_searchform_button', function(e) {\n                e.preventDefault();\n                var def = $('#definitions_search').val();\n                var dic = $('input[name=\"selectdictionary\"]:checked').val();\n                searchDefinition(def, dic);\n            });\n        }\n    };\n});"],"names":["define","$","Ajax","Notification","Templates","ModalFactory","searchDefinition","def","dic","call","methodname","args","word","dictionary","done","data","response","template","render","then","html","javascript","create","title","body","footer","modal","show","runTemplateJS","on","hide","destroy","val","this","attr","fail","exception","bind","init","document","e","preventDefault"],"mappings":";;;;;;;;AAyBAA,uCAAO,CAAC,SAAU,YAAa,oBAAqB,iBAChD,uBAAuB,SAASC,EAAGC,KAAMC,aAAcC,UAAWC,uBAkCzDC,iBAAiBC,IAAKC,KAE3BN,KAAKO,KAAK,CAAC,CACHC,WAAY,mCACZC,KAAM,CAACC,KAAML,IAAKM,WAAYL,KAC9BM,KAAM,SAASC,UAhCCC,SACpBC,SAAAA,SAAW,sBADSD,SAiCOD,MAhCgBE,SAC/Cb,UAAUc,OAAOD,SAAUD,UAAUG,MAAK,SAASC,KAAMC,YACrDhB,aAAaiB,OAAO,CAChBC,MAAO,aACPC,KAAMJ,KACNK,OAAQ,qGACTX,MAAK,SAASY,OACbA,MAAMC,OACNvB,UAAUwB,cAAcP,YACxBpB,EAAE,kBAAkB4B,GAAG,SAAS,WAC5BH,MAAMI,OACNJ,MAAMK,UACN9B,EAAE,uBAAuB+B,IAAI/B,EAAEgC,MAAMC,KAAK,gBAC1C5B,iBAAiBL,EAAEgC,MAAMC,KAAK,eAAgBjC,EAAE,0CAA0C+B,gBAGnGG,KAAKhC,aAAaiC,YAiBXC,KANNtB,WAQIoB,KAAMhC,aAAaiC,mBAIxB,CACHE,KAAM,WACFrC,EAAEsC,UAAUV,GAAG,QAAS,uCAAuC,SAASW,GACpEA,EAAEC,iBAGFnC,iBAFUL,EAAE,uBAAuB+B,MACzB/B,EAAE,0CAA0C+B"}